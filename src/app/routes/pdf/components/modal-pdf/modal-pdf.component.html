<div class="modal-header py-2">
  <h5 class="modal-title">Vista previa del PDF</h5>
  <button
    type="button"
    class="btn-close"
    aria-label="Cerrar"
    (click)="close()">
  </button>
</div>
<div class="modal-body">
  @if (loading()) {
    <div class="loading" aria-live="polite">
      <div class="pdf-skeleton" aria-hidden="true">
        <div class="skeleton-shimmer"></div>
        <div
          class="spinner-border main-spinner"
          role="status"
          aria-label="Generando PDF…">
          <span class="visually-hidden">Cargando…</span>
        </div>
        <div class="skeleton-header"></div>
        <div class="skeleton-row"></div>
        <div class="skeleton-row"></div>
        <div class="skeleton-row short"></div>
      </div>
      <div class="hint">{{ tip() }}</div>
      <button
        type="button"
        class="btn btn-sm btn-outline-secondary mt-2"
        (click)="close()">
        Cancelar
      </button>
    </div>
  } @else if (error()) {
    <div
      class="alert alert-danger d-flex justify-content-between align-items-center">
      <span>{{ error() }}</span>
      <button class="btn btn-sm btn-outline-secondary" (click)="retry()">
        Reintentar
      </button>
    </div>
  } @else if (hasPdf()) {
    <div class="pdf-frame">
      <iframe
        title="Previsualización PDF"
        [src]="pdfUrl()"
        width="100%"
        height="100%"
        frameborder="0">
      </iframe>
    </div>
    <small class="text-body-secondary d-block mt-2">
      Si el PDF no se visualiza, usa “Descargar .pdf”
    </small>
  }
</div>
<div class="modal-footer py-2">
  @if (!loading() && !error() && hasPdf()) {
    <button
      type="button"
      class="btn btn-primary"
      (click)="downloadPdf()">
      Descargar .pdf
    </button>
  }
  <button type="button" class="btn btn-outline-secondary" (click)="close()">
    Cerrar
  </button>
</div>
